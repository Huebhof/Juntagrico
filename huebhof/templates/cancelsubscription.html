{#% extends "base.html" %#}
{% load i18n %}
{% load juntagrico.config %}
{% load juntagrico.subscription %}
{% vocabulary "subscription" as v_subscription %}
{% block page_title %}
    <h3>
        {% blocktrans %}Künde dein/e/n {{ v_subscription }}{% endblocktrans %}
    </h3>
{% endblock %}
{% block content %}
    <div class="row mb-3">
        <div class="col-md-12">
            {#% blocktrans trimmed with ed=end_date|date:"d.m.Y" %#}
            {% blocktrans trimmed with ncd=next_cancel_date|date:"F" nby=next_business_year|date:"F" %}
            Hier kannst du dein/e/n {{ v_subscription }} kündigen. Der nächste
            reguläre Kündigungstermin ist der <b>{{ ncd }}</b>.
            {% endblocktrans %}
        </div>
        <div class="col-md-4">
            {% blocktrans trimmed with ncd=next_cancel_date|date:"F" nby=next_business_year|date:"F" %}
            Die {{ v_subscription }}-Bestandteile (auch die Kündigung) kann in der Regel nur jährlich geändert
            werden
            und muss bis spätestens Ende {{ ncd }} gemacht werden,
            damit die Änderung auf Anfang {{ nby }} in Kraft tritt.
            {% endblocktrans %}
        </div>
    </div>
    <div class="row mb-3">
        <div class="col-md-12">
            <form action="" method="POST" onsubmit="return confirm('{% blocktrans %}Möchtest du sicher dieses {{ v_subscription }} verbindlich künden?{% endblocktrans %}')">
                {% csrf_token %}
                <input name="end_date" value="{{ end_date |date:"Y-m-d" }}" type="hidden"/>
                <div class="form-group">
                    <label for="message">
                        {% trans "Mitteilung" %}
                    </label>
                    <textarea name="message" id="message" class="form-control" rows="12"placeholder="{% trans "Hier Nachricht eingeben" %}"></textarea>
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-danger">
                        {% blocktrans %}{{ v_subscription }} künden{% endblocktrans %}
                    </button>
                </div>
            </form>
        </div>
    </div>
{% endblock %}